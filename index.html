<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
html,body,canvas{margin:0;width:100%;height:100%;background:transparent;}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
<script>
const c=document.getElementById("c");
const e=new BABYLON.Engine(c,true,{preserveDrawingBuffer:true,stencil:true});
const s=new BABYLON.Scene(e);
s.clearColor=new BABYLON.Color4(0,0,0,0); // 背景透明

const cam=new BABYLON.ArcRotateCamera("cam",
  Math.PI/2, Math.PI/3, 2.2, BABYLON.Vector3.Zero(), s);
cam.attachControl(c,true);

new BABYLON.HemisphericLight("l",new BABYLON.Vector3(0,1,0),s);

let ag=null;
BABYLON.SceneLoader.Append("./","Duck1.glb",s,()=>{
  ag=s.animationGroups[0];
  s.meshes.forEach(m=>{
    if(m.material){
      m.material.alpha=0.6;      // アヒル半透明
      m.position.set(0,0,0);     // 画面中央
    }
  });
});

document.body.onclick=()=>{
  if(!ag) return;
  ag.stop();
  ag.start(false,1,5,12,false); // 指定フレーム再生
};

e.runRenderLoop(()=>s.render());
window.addEventListener("resize",()=>e.resize());
</script>
</body>
</html>
